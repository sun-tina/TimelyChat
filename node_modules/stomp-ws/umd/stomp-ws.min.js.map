{"version":3,"file":"stomp-ws.min.js","sources":["../src/common/frame.ts","../src/client/index.ts"],"sourcesContent":[null,null],"names":["MalformedFrameError","Error","constructor","message","Object","setPrototypeOf","this","prototype","textDecoder","TextDecoder","textEncoder","TextEncoder","escape","str","replace","unescape","encode","frame","command","headers","body","key","hasOwnProperty","call","length","s","combined","Uint8Array","set","verifyHeader","required","optional","h","undefined","extra","keys","join","noBody","toServerFrame","ev","data","byteLength","decoded","bytes","buffer","cursor","getLine","index","decode","slice","line","headerLine","msg","parts","split","value","heartBeat","test","verifyServer","url","options","send","socket","ws","_lastSend","Date","now","fn","Promise","resolve","reject","onclose","onmessage","then","processed","off","catch","err","removeEventListener","addEventListener","close","_connected","_this$options","host","URL","handleError","sx","parseInt","sy","cx","clientHeartBeat","cy","serverHeartBeat","Math","max","interval","setInterval","clearInterval","_lastRecv","readyState","WebSocket","CLOSING","CLOSED","binaryType","e","console","error","OPEN","onopen","setTimeout","connect"],"mappings":"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"}